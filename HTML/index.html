<!DOCTYPE html>
<!-- saved from url=(0035)https://aza3je6li7fy6.ok.kimi.link/ -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIËÅäÂ§©ÊºîÁ§∫ - Â∏¶ÂéÜÂè≤ÂØπËØùÂäüËÉΩ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .app-container {
            width: 90%;
            max-width: 1400px;
            height: 90vh;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            display: flex;
            overflow: hidden;
        }

        /* Â∑¶‰æßÂØπËØùÁõÆÂΩï */
        .sidebar {
            width: 300px;
            background: #f8fafc;
            border-right: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid #e5e7eb;
        }

        .new-chat-button {
            width: 100%;
            padding: 12px 16px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .new-chat-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(79, 172, 254, 0.4);
        }

        .conversations-list {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }

        .conversation-item {
            padding: 12px 16px;
            margin-bottom: 8px;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .conversation-item:hover {
            border-color: #4facfe;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(79, 172, 254, 0.1);
        }

        .conversation-item.active {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border-color: transparent;
        }

        .conversation-title {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .conversation-preview {
            font-size: 12px;
            opacity: 0.7;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .conversation-time {
            font-size: 11px;
            opacity: 0.6;
            margin-top: 4px;
        }

        /* Âè≥‰æßËÅäÂ§©Âå∫Âüü */
        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .chat-header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 20px 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .chat-title {
            font-size: 24px;
            font-weight: 600;
        }

        .chat-subtitle {
            font-size: 14px;
            opacity: 0.9;
            margin-top: 4px;
        }

        .ai-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #4ade80;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px 30px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message {
            display: flex;
            gap: 12px;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: white;
            flex-shrink: 0;
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .message.ai .message-avatar {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .message-content {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            background: #f3f4f6;
            color: #374151;
            line-height: 1.5;
            word-wrap: break-word;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .message-time {
            font-size: 12px;
            color: #9ca3af;
            margin-top: 4px;
        }

        .chat-input-container {
            border-top: 1px solid #e5e7eb;
            padding: 20px 30px;
            background: #fafafa;
        }

        .chat-input-wrapper {
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }

        .chat-input {
            flex: 1;
            min-height: 44px;
            max-height: 120px;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 22px;
            font-size: 16px;
            font-family: inherit;
            outline: none;
            resize: none;
            transition: all 0.3s ease;
            line-height: 1.4;
        }

        .chat-input:focus {
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .send-button {
            width: 44px;
            height: 44px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .send-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(79, 172, 254, 0.4);
        }

        .send-button:active {
            transform: scale(0.95);
        }

        .send-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .typing-indicator {
            display: none;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: #f3f4f6;
            border-radius: 18px;
            margin-bottom: 16px;
            animation: fadeIn 0.3s ease-out;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #9ca3af;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.4;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }

        .welcome-message {
            text-align: center;
            padding: 40px 20px;
            color: #6b7280;
        }

        .welcome-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .welcome-subtitle {
            font-size: 14px;
            opacity: 0.8;
        }

        .quick-responses {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 16px;
            justify-content: center;
        }

        .quick-response {
            padding: 8px 16px;
            background: #f3f4f6;
            border: 1px solid #e5e7eb;
            border-radius: 16px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quick-response:hover {
            background: #e5e7eb;
            transform: translateY(-1px);
        }

        .empty-conversations {
            text-align: center;
            padding: 40px 20px;
            color: #6b7280;
        }

        .empty-conversations-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .empty-conversations-subtitle {
            font-size: 14px;
            opacity: 0.8;
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .app-container {
                width: 100%;
                height: 100vh;
                border-radius: 0;
            }
            
            .sidebar {
                width: 280px;
            }
            
            .chat-header {
                padding: 16px 20px;
            }
            
            .chat-title {
                font-size: 20px;
            }
            
            .chat-messages {
                padding: 16px 20px;
            }
            
            .message-content {
                max-width: 85%;
            }
            
            .chat-input-container {
                padding: 16px 20px;
            }
        }

        @media (max-width: 640px) {
            .sidebar {
                position: absolute;
                left: -280px;
                top: 0;
                height: 100%;
                z-index: 1000;
                transition: left 0.3s ease;
            }
            
            .sidebar.open {
                left: 0;
            }
            
            .chat-area {
                width: 100%;
            }
        }
    </style>
<script src="./index_CSS/preview-widgets.min.js.‰∏ãËΩΩ" defer=""></script>
    <style>
      .kimi-brand-container {
        position: fixed;
        bottom: 16px;
        right: 16px;
        display: flex;
        align-items: center;
        gap: 8px;
        z-index: 99999999;
        transition: opacity 0.3s ease;
      }

      .kimi-brand-close-icon {
        cursor: pointer;
        border-radius: 50%;
        width: 26px;
        height: 26px;
        background: rgba(69, 69, 69, 0.70);
        display: none;
        align-items: center;
        justify-content: center;
        border: 0.5px solid rgba(255, 255, 255, 0.15);
      }

      .kimi-brand-container:hover .kimi-brand-close-icon {
        display: flex;
      }

      .kimi-brand-link {
        background: #000;
        color: white;
        padding: 4px 6px 4px 4px;
        border-radius: 16px;
        font-family: Arial, sans-serif;
        font-size: 12px;
        line-height: 18px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 4px;
        border: 0.5px solid rgba(255, 255, 255, 0.15);
        text-decoration: none;
      }

      .kimi-brand-container:hover .kimi-brand-icon {
        width: 16px;
      }

      .kimi-brand-icon {
        width: 0;
        overflow: hidden;
        transition: width 0.3s ease;
        pointer-events: none;
      }

      .kimi-brand-avatar {
        width: 18px;
        height: 18px;
        border: 0.5px solid rgba(255, 255, 255, 0.15);
        border-radius: 50%;
      }
    </style>
  <style type="text/css">@font-face {
  font-family: "xm-iconfont";
  src: url('//at.alicdn.com/t/font_792691_ptvyboo0bno.eot?t=1574048839056');
  /* IE9 */
  src: url('//at.alicdn.com/t/font_792691_ptvyboo0bno.eot?t=1574048839056#iefix') format('embedded-opentype'), /* IE6-IE8 */ url('data:application/x-font-woff2;charset=utf-8;base64,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') format('woff2'), url('//at.alicdn.com/t/font_792691_ptvyboo0bno.woff?t=1574048839056') format('woff'), url('//at.alicdn.com/t/font_792691_ptvyboo0bno.ttf?t=1574048839056') format('truetype'), /* chrome, firefox, opera, Safari, Android, iOS 4.2+ */ url('//at.alicdn.com/t/font_792691_ptvyboo0bno.svg?t=1574048839056#iconfont') format('svg');
  /* iOS 4.1- */
}
.xm-iconfont {
  font-family: "xm-iconfont" !important;
  font-size: 16px;
  font-style: normal;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
.xm-icon-quanxuan:before {
  content: "\e62c";
}
.xm-icon-caidan:before {
  content: "\e610";
}
.xm-icon-fanxuan:before {
  content: "\e837";
}
.xm-icon-pifu:before {
  content: "\e668";
}
.xm-icon-qingkong:before {
  content: "\e63e";
}
.xm-icon-sousuo:before {
  content: "\e600";
}
.xm-icon-danx:before {
  content: "\e62b";
}
.xm-icon-duox:before {
  content: "\e613";
}
.xm-icon-close:before {
  content: "\e601";
}
.xm-icon-expand:before {
  content: "\e641";
}
.xm-icon-banxuan:before {
  content: "\e60d";
}
</style><style type="text/css">@-webkit-keyframes xm-upbit {
  from {
    -webkit-transform: translate3d(0, 30px, 0);
    opacity: 0.3;
  }
  to {
    -webkit-transform: translate3d(0, 0, 0);
    opacity: 1;
  }
}
@keyframes xm-upbit {
  from {
    transform: translate3d(0, 30px, 0);
    opacity: 0.3;
  }
  to {
    transform: translate3d(0, 0, 0);
    opacity: 1;
  }
}
@-webkit-keyframes loader {
  0% {
    -webkit-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
@keyframes loader {
  0% {
    -webkit-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
xm-select {
  background-color: #FFF;
  position: relative;
  border: 1px solid #E6E6E6;
  border-radius: 2px;
  display: block;
  width: 100%;
  cursor: pointer;
  outline: none;
}
xm-select * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-size: 14px;
  font-weight: 400;
  text-overflow: ellipsis;
  user-select: none;
  -ms-user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
}
xm-select:hover,
xm-select:focus {
  border-color: #C0C4CC;
}
xm-select > .xm-tips {
  color: #999999;
  padding: 0 10px;
  position: absolute;
  display: flex;
  height: 100%;
  align-items: center;
}
xm-select > .xm-icon {
  display: inline-block;
  overflow: hidden;
  position: absolute;
  width: 0;
  height: 0;
  right: 10px;
  top: 50%;
  margin-top: -3px;
  cursor: pointer;
  border: 6px dashed transparent;
  border-top-color: #C2C2C2;
  border-top-style: solid;
  transition: all 0.3s;
  -webkit-transition: all 0.3s;
}
xm-select > .xm-icon-expand {
  margin-top: -9px;
  transform: rotate(180deg);
}
xm-select > .xm-label.single-row {
  position: absolute;
  top: 0;
  bottom: 0px;
  left: 0px;
  right: 30px;
  overflow: auto hidden;
}
xm-select > .xm-label.single-row .scroll {
  overflow-y: hidden;
}
xm-select > .xm-label.single-row .label-content {
  flex-wrap: nowrap;
  white-space: nowrap;
}
xm-select > .xm-label.auto-row .label-content {
  flex-wrap: wrap;
  padding-right: 30px !important;
}
xm-select > .xm-label.auto-row .xm-label-block > span {
  white-space: unset;
  height: 100%;
}
xm-select > .xm-label .scroll .label-content {
  display: flex;
  padding: 3px 10px;
}
xm-select > .xm-label .xm-label-block {
  display: flex;
  position: relative;
  padding: 0px 5px;
  margin: 2px 5px 2px 0;
  border-radius: 3px;
  align-items: baseline;
  color: #FFF;
}
xm-select > .xm-label .xm-label-block > span {
  display: flex;
  color: #FFF;
  white-space: nowrap;
}
xm-select > .xm-label .xm-label-block > i {
  color: #FFF;
  margin-left: 8px;
  font-size: 12px;
  cursor: pointer;
  display: flex;
}
xm-select > .xm-label .xm-label-block.disabled {
  background-color: #C2C2C2 !important;
  cursor: no-drop !important;
}
xm-select > .xm-label .xm-label-block.disabled > i {
  cursor: no-drop !important;
}
xm-select > .xm-body {
  position: absolute;
  left: 0;
  top: 42px;
  padding: 5px 0;
  z-index: 999;
  width: 100%;
  min-width: fit-content;
  border: 1px solid #E6E6E6;
  background-color: #fff;
  border-radius: 2px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12);
  animation-name: xm-upbit;
  animation-duration: 0.3s;
  animation-fill-mode: both;
}
xm-select > .xm-body .scroll-body {
  overflow-x: hidden;
  overflow-y: auto;
}
xm-select > .xm-body .scroll-body::-webkit-scrollbar {
  width: 8px;
}
xm-select > .xm-body .scroll-body::-webkit-scrollbar-track {
  -webkit-border-radius: 2em;
  -moz-border-radius: 2em;
  -ms-border-radius: 2em;
  border-radius: 2em;
  background-color: #FFF;
}
xm-select > .xm-body .scroll-body::-webkit-scrollbar-thumb {
  -webkit-border-radius: 2em;
  -moz-border-radius: 2em;
  -ms-border-radius: 2em;
  border-radius: 2em;
  background-color: #C2C2C2;
}
xm-select > .xm-body.up {
  top: auto;
  bottom: 42px;
}
xm-select > .xm-body.relative {
  position: relative;
  display: block !important;
  top: 0;
  box-shadow: none;
  border: none;
  animation-name: none;
  animation-duration: 0;
  min-width: 100%;
}
xm-select > .xm-body .xm-group {
  cursor: default;
}
xm-select > .xm-body .xm-group-item {
  display: inline-block;
  cursor: pointer;
  padding: 0 10px;
  color: #999;
  font-size: 12px;
}
xm-select > .xm-body .xm-option {
  display: flex;
  align-items: center;
  position: relative;
  padding: 0 10px;
  cursor: pointer;
}
xm-select > .xm-body .xm-option-icon {
  color: transparent;
  display: flex;
  border: 1px solid #E6E6E6;
  border-radius: 3px;
  justify-content: center;
  align-items: center;
}
xm-select > .xm-body .xm-option-icon.xm-custom-icon {
  color: unset;
  border: unset;
}
xm-select > .xm-body .xm-option-icon-hidden {
  margin-right: -10px;
}
xm-select > .xm-body .xm-option-icon.xm-icon-danx {
  border-radius: 100%;
}
xm-select > .xm-body .xm-option-content {
  display: flex;
  position: relative;
  padding-left: 15px;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  ;
  width: calc(100% - 20px);
}
xm-select > .xm-body .xm-option.hide-icon .xm-option-content {
  padding-left: 0;
}
xm-select > .xm-body .xm-option.selected.hide-icon .xm-option-content {
  color: #FFF !important;
}
xm-select > .xm-body .xm-option .loader {
  width: 0.8em;
  height: 0.8em;
  margin-right: 6px;
  color: #C2C2C2;
}
xm-select > .xm-body .xm-select-empty {
  text-align: center;
  color: #999;
}
xm-select > .xm-body .disabled {
  cursor: no-drop;
}
xm-select > .xm-body .disabled:hover {
  background-color: #FFF;
}
xm-select > .xm-body .disabled .xm-option-icon {
  border-color: #C2C2C2 !important;
}
xm-select > .xm-body .disabled .xm-option-content {
  color: #C2C2C2 !important;
}
xm-select > .xm-body .disabled.selected > .xm-option-icon {
  color: #C2C2C2 !important;
}
xm-select > .xm-body .xm-search {
  background-color: #FFF !important;
  position: relative;
  padding: 0 10px;
  margin-bottom: 5px;
  cursor: pointer;
}
xm-select > .xm-body .xm-search > i {
  position: absolute;
}
xm-select > .xm-body .xm-search-input {
  border: none;
  border-bottom: 1px solid #E6E6E6;
  padding-left: 27px;
  cursor: text;
}
xm-select > .xm-body .xm-paging {
  padding: 0 10px;
  display: flex;
  margin-top: 5px;
}
xm-select > .xm-body .xm-paging > span:first-child {
  border-radius: 2px 0 0 2px;
}
xm-select > .xm-body .xm-paging > span:last-child {
  border-radius: 0 2px 2px 0;
}
xm-select > .xm-body .xm-paging > span {
  display: flex;
  flex: auto;
  justify-content: center;
  vertical-align: middle;
  margin: 0 -1px 0 0;
  background-color: #fff;
  color: #333;
  font-size: 12px;
  border: 1px solid #e2e2e2;
  flex-wrap: nowrap;
  width: 100%;
  overflow: hidden;
  min-width: 50px;
}
xm-select > .xm-body .xm-toolbar {
  padding: 0 10px;
  display: flex;
  margin: -3px 0;
  cursor: default;
}
xm-select > .xm-body .xm-toolbar .toolbar-tag {
  cursor: pointer;
  display: flex;
  margin-right: 20px;
  align-items: baseline;
}
xm-select > .xm-body .xm-toolbar .toolbar-tag:hover {
  opacity: 0.8;
}
xm-select > .xm-body .xm-toolbar .toolbar-tag:active {
  opacity: 1;
}
xm-select > .xm-body .xm-toolbar .toolbar-tag > i {
  margin-right: 2px;
  font-size: 14px;
}
xm-select > .xm-body .xm-toolbar .toolbar-tag:last-child {
  margin-right: 0;
}
xm-select > .xm-body .xm-body-custom {
  line-height: initial;
  cursor: default;
}
xm-select > .xm-body .xm-body-custom * {
  box-sizing: initial;
}
xm-select > .xm-body .xm-tree {
  position: relative;
}
xm-select > .xm-body .xm-tree-icon {
  display: inline-block;
  margin-right: 3px;
  cursor: pointer;
  border: 6px dashed transparent;
  border-left-color: #C2C2C2;
  border-left-style: solid;
  transition: all 0.3s;
  -webkit-transition: all 0.3s;
  z-index: 2;
  visibility: hidden;
}
xm-select > .xm-body .xm-tree-icon.expand {
  margin-top: 3px;
  margin-right: 5px;
  margin-left: -2px;
  transform: rotate(90deg);
}
xm-select > .xm-body .xm-tree-icon.xm-visible {
  visibility: visible;
}
xm-select > .xm-body .xm-tree .left-line {
  position: absolute;
  left: 13px;
  width: 0;
  z-index: 1;
  border-left: 1px dotted #c0c4cc !important;
}
xm-select > .xm-body .xm-tree .top-line {
  position: absolute;
  left: 13px;
  height: 0;
  z-index: 1;
  border-top: 1px dotted #c0c4cc !important;
}
xm-select > .xm-body .xm-tree .xm-tree-icon + .top-line {
  margin-left: 1px;
}
xm-select > .xm-body .scroll-body > .xm-tree > .xm-option > .top-line,
xm-select > .xm-body .scroll-body > .xm-option > .top-line {
  width: 0 !important;
}
xm-select > .xm-body .xm-cascader-box {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  padding: 5px 0;
  border: 1px solid #E6E6E6;
  background-color: #fff;
  border-radius: 2px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12);
  margin: -1px;
}
xm-select > .xm-body .xm-cascader-box::before {
  content: ' ';
  position: absolute;
  width: 0;
  height: 0;
  border: 6px solid transparent;
  border-right-color: #E6E6E6;
  top: 10px;
  left: -12px;
}
xm-select > .xm-body .xm-cascader-box::after {
  content: ' ';
  position: absolute;
  width: 0;
  height: 0;
  border: 6px solid transparent;
  border-right-color: #fff;
  top: 10px;
  left: -11px;
}
xm-select > .xm-body .xm-cascader-scroll {
  height: 100%;
  overflow-x: hidden;
  overflow-y: auto;
}
xm-select > .xm-body.cascader {
  width: unset;
  min-width: unset;
}
xm-select > .xm-body.cascader .xm-option-content {
  padding-left: 8px;
}
xm-select > .xm-body.cascader .disabled .xm-right-arrow {
  color: #C2C2C2 !important;
}
xm-select > .xm-body.cascader .hide-icon.disabled .xm-right-arrow {
  color: #999 !important;
}
xm-select .xm-input {
  cursor: pointer;
  border-radius: 2px;
  border-width: 1px;
  border-style: solid;
  border-color: #E6E6E6;
  display: block;
  width: 100%;
  box-sizing: border-box;
  background-color: #FFF;
  line-height: 1.3;
  padding-left: 10px;
  outline: 0;
  user-select: text;
  -ms-user-select: text;
  -moz-user-select: text;
  -webkit-user-select: text;
}
xm-select .dis {
  display: none;
}
xm-select .loading {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(255, 255, 255, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
}
xm-select .loader {
  border: 0.2em dotted currentcolor;
  border-radius: 50%;
  -webkit-animation: 1s loader linear infinite;
  animation: 1s loader linear infinite;
  display: inline-block;
  width: 1em;
  height: 1em;
  color: inherit;
  vertical-align: middle;
  pointer-events: none;
}
xm-select .xm-select-default {
  position: absolute;
  width: 100%;
  height: 100%;
  border: none;
  visibility: hidden;
}
xm-select .xm-select-disabled {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  cursor: no-drop;
  z-index: 2;
  opacity: 0.3;
  background-color: #FFF;
}
xm-select .item--divided {
  border-top: 1px solid #ebeef5;
  width: calc(100% - 20px);
  cursor: initial;
}
xm-select .xm-right-arrow {
  position: absolute;
  right: 5px;
  top: -1px;
  font-weight: 700;
  transform: scale(0.6, 1);
}
xm-select .xm-right-arrow::after {
  content: '>';
}
xm-select[size='large'] {
  min-height: 40px;
  line-height: 40px;
}
xm-select[size='large'] .xm-input {
  height: 40px;
}
xm-select[size='large'] .xm-label .scroll .label-content {
  line-height: 34px;
}
xm-select[size='large'] .xm-label .xm-label-block {
  height: 30px;
  line-height: 30px;
}
xm-select[size='large'] .xm-body .xm-option .xm-option-icon {
  height: 20px;
  width: 20px;
  font-size: 20px;
}
xm-select[size='large'] .xm-paging > span {
  height: 34px;
  line-height: 34px;
}
xm-select[size='large'] .xm-tree .left-line {
  height: 100%;
  bottom: 20px;
}
xm-select[size='large'] .xm-tree .left-line-group {
  height: calc(100% - 40px);
}
xm-select[size='large'] .xm-tree .xm-tree-icon.xm-hidden + .top-line {
  top: 19px;
}
xm-select[size='large'] .item--divided {
  margin: 10px;
}
xm-select {
  min-height: 36px;
  line-height: 36px;
}
xm-select .xm-input {
  height: 36px;
}
xm-select .xm-label .scroll .label-content {
  line-height: 30px;
}
xm-select .xm-label .xm-label-block {
  height: 26px;
  line-height: 26px;
}
xm-select .xm-body .xm-option .xm-option-icon {
  height: 18px;
  width: 18px;
  font-size: 18px;
}
xm-select .xm-paging > span {
  height: 30px;
  line-height: 30px;
}
xm-select .xm-tree .left-line {
  height: 100%;
  bottom: 18px;
}
xm-select .xm-tree .left-line-group {
  height: calc(100% - 36px);
}
xm-select .xm-tree .xm-tree-icon.xm-hidden + .top-line {
  top: 17px;
}
xm-select .item--divided {
  margin: 9px;
}
xm-select[size='small'] {
  min-height: 32px;
  line-height: 32px;
}
xm-select[size='small'] .xm-input {
  height: 32px;
}
xm-select[size='small'] .xm-label .scroll .label-content {
  line-height: 26px;
}
xm-select[size='small'] .xm-label .xm-label-block {
  height: 22px;
  line-height: 22px;
}
xm-select[size='small'] .xm-body .xm-option .xm-option-icon {
  height: 16px;
  width: 16px;
  font-size: 16px;
}
xm-select[size='small'] .xm-paging > span {
  height: 26px;
  line-height: 26px;
}
xm-select[size='small'] .xm-tree .left-line {
  height: 100%;
  bottom: 16px;
}
xm-select[size='small'] .xm-tree .left-line-group {
  height: calc(100% - 32px);
}
xm-select[size='small'] .xm-tree .xm-tree-icon.xm-hidden + .top-line {
  top: 15px;
}
xm-select[size='small'] .item--divided {
  margin: 8px;
}
xm-select[size='mini'] {
  min-height: 28px;
  line-height: 28px;
}
xm-select[size='mini'] .xm-input {
  height: 28px;
}
xm-select[size='mini'] .xm-label .scroll .label-content {
  line-height: 22px;
}
xm-select[size='mini'] .xm-label .xm-label-block {
  height: 18px;
  line-height: 18px;
}
xm-select[size='mini'] .xm-body .xm-option .xm-option-icon {
  height: 14px;
  width: 14px;
  font-size: 14px;
}
xm-select[size='mini'] .xm-paging > span {
  height: 22px;
  line-height: 22px;
}
xm-select[size='mini'] .xm-tree .left-line {
  height: 100%;
  bottom: 14px;
}
xm-select[size='mini'] .xm-tree .left-line-group {
  height: calc(100% - 28px);
}
xm-select[size='mini'] .xm-tree .xm-tree-icon.xm-hidden + .top-line {
  top: 13px;
}
xm-select[size='mini'] .item--divided {
  margin: 7px;
}
.layui-form-pane xm-select {
  margin: -1px -1px -1px 0;
}
</style></head>
<body>
    <div class="app-container">
        <!-- Â∑¶‰æßÂØπËØùÁõÆÂΩï -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <button class="new-chat-button" onclick="createNewConversation()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                    Êñ∞Âª∫ÂØπËØù
                </button>
            </div>
            
            <div class="conversations-list" id="conversationsList">
                <div class="conversation-item active" onclick="switchToConversation(1763775708944)">
                    <div class="conversation-title">123231</div>
                    <div class="conversation-preview">123231</div>
                    <div class="conversation-time">09:41</div>
                </div>
            
                <div class="conversation-item " onclick="switchToConversation(1763775706391)">
                    <div class="conversation-title">12312344444444</div>
                    <div class="conversation-preview">12312344444444</div>
                    <div class="conversation-time">09:42</div>
                </div>
            </div>
        </div>

        <!-- Âè≥‰æßËÅäÂ§©Âå∫Âüü -->
        <div class="chat-area">
            <div class="chat-header">
                <div>
                    <div class="chat-title" id="currentChatTitle">123231</div>
                    <div class="chat-subtitle">ÂâçÁ´ØÂ≠¶‰π†ÊºîÁ§∫Ê°à‰æã</div>
                </div>
                <div class="ai-status">
                    <div class="status-dot"></div>
                    <span>Âú®Á∫ø</span>
                </div>
            </div>
            
            <div class="chat-messages" id="chatMessages">

                


   
  
            <div class="message user"><div class="message-avatar">U</div><div class="message-content">123231<div class="message-time">09:41</div></div></div><div class="message ai"><div class="message-avatar">AI</div><div class="message-content">ËøôÊòØ‰∏Ä‰∏™ÂæàÊúâË∂£ÁöÑËØùÈ¢òÔºÅËôΩÁÑ∂ÊàëÊòØÊºîÁ§∫Â∫îÁî®Ôºå‰ΩÜÊàëÁêÜËß£‰Ω†ÁöÑÊÉ≥Ê≥ï„ÄÇ<div class="message-time">09:41</div></div></div><div class="typing-indicator" id="typingIndicator" style="display: none;">
                    <div class="message-avatar">AI</div>
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                    <span style="color: #9ca3af; font-size: 14px;">AI Ê≠£Âú®ËæìÂÖ•...</span>
                </div>
            </div>
            
            <div class="chat-input-container">
                <div class="chat-input-wrapper">
                    <textarea class="chat-input" id="chatInput" placeholder="ËæìÂÖ•Ê∂àÊÅØÔºåÊåâ Enter ÂèëÈÄÅ..." rows="1" style="height: auto;"></textarea>
                    <button class="send-button" id="sendButton" onclick="sendMessage()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                            <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = '';


        // ÂØπËØùÁÆ°ÁêÜ
        let conversations = [];
        let currentConversationId = null;
        let isWaitingForResponse = false;
        let maxid = 1
        // DOM ÂÖÉÁ¥†
        const chatInput = document.getElementById('chatInput');
        const sendButton = document.getElementById('sendButton');
        const chatMessages = document.getElementById('chatMessages');
        const typingIndicator = document.getElementById('typingIndicator');
        const conversationsList = document.getElementById('conversationsList');
        const currentChatTitle = document.getElementById('currentChatTitle');

        // ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            loadConversations();
            
            // Ëá™Âä®Ë∞ÉÊï¥ËæìÂÖ•Ê°ÜÈ´òÂ∫¶
            chatInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 120) + 'px';
            });

            // Enter ÈîÆÂèëÈÄÅÊ∂àÊÅØ
            chatInput.addEventListener('keypress', function(e) {
                if (e.key == 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            // ËÅöÁÑ¶ËæìÂÖ•Ê°Ü
            chatInput.focus();
        });
        // ÂàõÂª∫Êñ∞ÂØπËØù
        function createNewConversation() {
            if(cancreate()){
              const conversationId = maxid++;
              const conversation = {
                id: conversationId,
                title: 'Êñ∞ÂØπËØù',
                preview: 'ÂºÄÂßãÂØπËØù...',
                messages: [],
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
              };
            conversations.unshift(conversation);
            currentConversationId = conversationId;
            renderConversationsList();
            switchToConversation(conversationId);
            }
            else{
            conversations.unshift(maxid);
            currentConversationId = maxid
            renderConversationsList();
            switchToConversation(maxid);
            }


        }


        async function loadSessionHistory() {
            try {
              for(let id=1 ;id<=maxid;id++){
                const response = await fetch(`${API_BASE}/messages?id=${id}`);
                const data = await response.json();
                if (data.status == 'success') {
                  if (data.response.length==0) 
                    continue
                    conversations.push({id:id,title:"ÂºÄÂßãÂØπËØù...",messages:[]});
                      n=0
                      data.response.forEach(msg => {
                        if (n==0){
                          conversations[id-1].title=msg.content
                          n=1
                        }
                      let temp = {content:msg.content,sender:msg.type,timestamp:""}
                      conversations[id-1].messages.push(temp) 
                      });
                  
                } else {
                }
              }
  
            } catch (error) {
              console.log(error);
            } 
        }



        // ÂàáÊç¢Âà∞ÊåáÂÆöÂØπËØù
    async    function switchToConversation(conversationId) {
            const conversation = conversations.find(c => c.id == conversationId);
            if (!conversation) return;
            currentConversationId = conversationId;
            // Êõ¥Êñ∞Ê†áÈ¢ò
            currentChatTitle.textContent = conversation.title;
            // Ê∏ÖÁ©∫ÂΩìÂâçÊ∂àÊÅØ
            const messages = chatMessages.querySelectorAll('.message');
            messages.forEach(msg => msg.remove());
            // Ê∏≤ÊüìÂØπËØùÊ∂àÊÅØ
            if (conversation.messages.length == 0) {
                // ÊòæÁ§∫Ê¨¢ËøéÊ∂àÊÅØ
                showWelcomeMessage();
            } else {
                // Ê∏≤ÊüìÂéÜÂè≤Ê∂àÊÅØ
                conversation.messages.forEach(msg => {
                    addMessageToChat(msg.content, msg.sender, msg.timestamp, false);
                });
            }
            // Êõ¥Êñ∞ÂØπËØùÂàóË°®Áä∂ÊÄÅ
            renderConversationsList();
            scrollToBottom();
        }

        // Ê∏≤ÊüìÂØπËØùÂàóË°®
        function renderConversationsList() {
            if (conversations.length == 0) {
                conversationsList.innerHTML = `
                    <div class="empty-conversations">
                        <div class="empty-conversations-title">ÊöÇÊó†ÂØπËØù</div>
                        <div class="empty-conversations-subtitle">ÁÇπÂáª‰∏äÊñπÊåâÈíÆÂºÄÂßãÊñ∞ÂØπËØù</div>
                    </div>
                `;
                return;
            }

            conversationsList.innerHTML = conversations.map(conversation => `
                <div class="conversation-item ${conversation.id == currentConversationId ? 'active' : ''}" 
                     onclick="switchToConversation('${conversation.id}')">
                    <div class="conversation-title">${conversation.title}</div>
                </div>
            `).join('');
        }

        // ÂèëÈÄÅÊ∂àÊÅØ
       async function sendMessage() {
            const message = chatInput.value.trim();
            if (!message || isWaitingForResponse ) return;

            const conversation = conversations.find(c => c.id == currentConversationId);
            if (!conversation) return;

            // Ê∑ªÂä†Áî®Êà∑Ê∂àÊÅØÂà∞ÂØπËØù
            const userMessage = {
                content: message,
                sender: 'user',
                timestamp: new Date().toISOString()
            };
            
            conversation.messages.push(userMessage);
            addMessageToChat(message, 'user');
            
            // Ê∏ÖÁ©∫ËæìÂÖ•Ê°Ü
            chatInput.value = '';
            chatInput.style.height = 'auto';
            
            // Á¶ÅÁî®ÂèëÈÄÅ
            isWaitingForResponse = true;
            sendButton.disabled = true;
            
            // ÊòæÁ§∫ËæìÂÖ•ÊåáÁ§∫Âô®
            showTypingIndicator();
            
            const response =await generateResponse(message);
            const aiMessage = {
                    content: response,
                    sender: 'ai',
                    timestamp: new Date().toISOString()
            };
                
            conversation.messages.push(aiMessage);
            hideTypingIndicator();
            addMessageToChat(response, 'ai');
            
            // Êõ¥Êñ∞ÂØπËØùÈ¢ÑËßàÂíåÊ†áÈ¢ò
            updateConversationPreview(conversation, message);
            
            // ÈáçÊñ∞ÂêØÁî®ÂèëÈÄÅ
            isWaitingForResponse = false;
            sendButton.disabled = false;
            chatInput.focus();
            
            // ‰øùÂ≠òÂØπËØù
            saveConversations();
            renderConversationsList();
        }

        // Âø´ÈÄüÂõûÂ§ç
        function sendQuickResponse(message) {
            if (isWaitingForResponse || !currentConversationId) return;
            
            const conversation = conversations.find(c => c.id == currentConversationId);
            if (!conversation) return;

            const userMessage = {
                content: message,
                sender: 'user',
                timestamp: new Date().toISOString()
            };
            
            conversation.messages.push(userMessage);
            addMessageToChat(message, 'user');
            
            isWaitingForResponse = true;
            sendButton.disabled = true;
            showTypingIndicator();
            
            setTimeout(() => {
                const response = generateResponse(message);
                const aiMessage = {
                    content: response,
                    sender: 'ai',
                    timestamp: new Date().toISOString()
                };
                
                conversation.messages.push(aiMessage);
                hideTypingIndicator();
                addMessageToChat(response, 'ai');
                
                updateConversationPreview(conversation, message);
                
                isWaitingForResponse = false;
                sendButton.disabled = false;
                chatInput.focus();
                
                saveConversations();
                renderConversationsList();
            }, 1200);
        }

        // Ê∑ªÂä†Ê∂àÊÅØÂà∞ËÅäÂ§©Âå∫Âüü
        function addMessageToChat(content, sender, timestamp = null, scroll = true) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = sender == 'user' ? 'U' : 'AI';
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.textContent = content;
            
            const timeDiv = document.createElement('div');
            timeDiv.className = 'message-time';
            timeDiv.textContent = timestamp ? formatTime(timestamp) : new Date().toLocaleTimeString('zh-CN', {
                hour: '2-digit',
                minute: '2-digit'
            });
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(contentDiv);
            contentDiv.appendChild(timeDiv);
            
            // Âú®ËæìÂÖ•ÊåáÁ§∫Âô®‰πãÂâçÊèíÂÖ•Ê∂àÊÅØ
            chatMessages.insertBefore(messageDiv, typingIndicator);
            
            if (scroll) {
                scrollToBottom();
            }
        }

        // ÊòæÁ§∫Ê¨¢ËøéÊ∂àÊÅØ
        function showWelcomeMessage() {
            const welcomeDiv = document.createElement('div');
            const existingWelcomeMessage = chatMessages.querySelector('.welcome-message');
            if (existingWelcomeMessage) {
              return; // Â¶ÇÊûúÂ∑≤Â≠òÂú®ÔºåÁõ¥Êé•ËøîÂõûÔºå‰∏çÈáçÂ§çÊ∑ªÂä†
            }
            welcomeDiv.className = 'welcome-message';
            welcomeDiv.innerHTML = `
                <div class="welcome-title">üëã Ê¨¢Ëøé‰ΩøÁî® AI ËÅäÂ§©ÊºîÁ§∫</div>
                <div class="welcome-subtitle">ËøôÊòØ‰∏Ä‰∏™Á∫ØÂâçÁ´ØÂÆûÁé∞ÁöÑËÅäÂ§©Â∫îÁî®ÔºåÊîØÊåÅÂéÜÂè≤ÂØπËØùÂäüËÉΩ</div>
                <div class="quick-responses">
                    <div class="quick-response" onclick="sendQuickResponse('‰Ω†Â•Ω')">‰Ω†Â•Ω</div>
                    <div class="quick-response" onclick="sendQuickResponse('‰ªãÁªç‰∏Ä‰∏ãËá™Â∑±')">‰ªãÁªç‰∏Ä‰∏ãËá™Â∑±</div>
                    <div class="quick-response" onclick="sendQuickResponse('‰Ω†‰ºö‰ªÄ‰πà')">‰Ω†‰ºö‰ªÄ‰πà</div>
                    <div class="quick-response" onclick="sendQuickResponse('ËÆ≤‰∏™Á¨ëËØù')">ËÆ≤‰∏™Á¨ëËØù</div>
                </div>
            `;
            chatMessages.insertBefore(welcomeDiv, typingIndicator);
        }

        // Êõ¥Êñ∞ÂØπËØùÈ¢ÑËßà
        function updateConversationPreview(conversation, lastMessage) {
            conversation.preview = lastMessage.length > 20 ? lastMessage.substring(0, 20) + '...' : lastMessage;
            conversation.updatedAt = new Date().toISOString();
            
            // Â¶ÇÊûúÊòØÁ¨¨‰∏ÄÊù°Ê∂àÊÅØÔºåÊõ¥Êñ∞Ê†áÈ¢ò
            if (conversation.messages.length == 2) { // Áî®Êà∑Ê∂àÊÅØ + AIÂõûÂ§ç
                conversation.title = lastMessage.length > 15 ? lastMessage.substring(0, 15) + '...' : lastMessage;
            }
        }

        // ÁîüÊàêÂõûÂ§ç
        async function generateResponse(message) {
        try {
              // Ë∞ÉÁî®ÂêéÁ´ØAPI
              const response = await fetch(`${API_BASE}/chat?query=${encodeURIComponent(message)}&id=${currentConversationId}`);
              const data = await response.json();
              if (data.status == 'success') {
                 return data.response
              } else {
                 return 'Êä±Ê≠âÔºåÊàëÊó†Ê≥ïÂõûÁ≠î‰Ω†ÁöÑÈóÆÈ¢ò„ÄÇ';
              }
          } catch (error) {
              return error.message.toString();
          }
        }

        // ÊòæÁ§∫ËæìÂÖ•ÊåáÁ§∫Âô®
        function showTypingIndicator() {
            typingIndicator.style.display = 'flex';
            scrollToBottom();
        }

        // ÈöêËóèËæìÂÖ•ÊåáÁ§∫Âô®
        function hideTypingIndicator() {
            typingIndicator.style.display = 'none';
        }

        // ÊªöÂä®Âà∞Â∫ïÈÉ®
        function scrollToBottom() {
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        // Ê†ºÂºèÂåñÊó∂Èó¥
        function formatTime(timestamp) {
            const date = new Date(timestamp);
            const now = new Date();
            const diff = now - date;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            
            if (days == 0) {
                return date.toLocaleTimeString('zh-CN', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
            } else if (days == 1) {
                return 'Êò®Â§© ' + date.toLocaleTimeString('zh-CN', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
            } else if (days < 7) {
                return days + 'Â§©Ââç';
            } else {
                return date.toLocaleDateString('zh-CN', {
                    month: '2-digit',
                    day: '2-digit'
                });
            }
        }
        function cancreate(){
          let n = 1
          for(let chat of conversations){
            if (chat.messages.length != 0)
               n+=1
          }
          return  n == maxid
 
        }
        // ‰øùÂ≠òÂØπËØùÂà∞Êú¨Âú∞Â≠òÂÇ®
        function saveConversations() {
            localStorage.setItem('m', JSON.stringify(maxid));
        }

        // ‰ªéÊú¨Âú∞Â≠òÂÇ®Âä†ËΩΩÂØπËØù
      async  function loadConversations() {

            const id = localStorage.getItem('m');
            if (typeof id == 'string' && id != 'null') {
                maxid = parseInt(id);
                // ‰ªéÊúçÂä°Âô®Ëé∑ÂèñÊâÄÊúâÂØπËØù
                await loadSessionHistory()
                // clear_chat(true);
            }
            else{
              maxid = 1
            }
            createNewConversation();
        }
        // Ê∑ªÂä†ÈîÆÁõòÂø´Êç∑ÈîÆ
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + L Ê∏ÖÂ±è
            if ((e.ctrlKey || e.metaKey) && e.key == 'l') {
                e.preventDefault();
                if (currentConversationId) {
                    const conversation = conversations.find(c => c.id == currentConversationId);
                    if (conversation && conversation.messages.length > 0) {
                        // Ê∏ÖÁ©∫ÂΩìÂâçÊòæÁ§∫ÁöÑÊ∂àÊÅØ
                        const messages = chatMessages.querySelectorAll('.message');
                        messages.forEach(msg => msg.remove());
                        
                        // ÈáçÊñ∞ÊòæÁ§∫ÂéÜÂè≤Ê∂àÊÅØ

                        conversation.messages.forEach(msg => {
                            addMessageToChat(msg.content, msg.sender, msg.timestamp, false);
                        });
                    }
                }
            }
            
            // Ctrl/Cmd + N Êñ∞Âª∫ÂØπËØù
            if ((e.ctrlKey || e.metaKey) && e.key == 'n') {
                e.preventDefault();
                createNewConversation();
            }
        });
    </script>


  <div class="kimi-brand-container">
    <div class="kimi-brand-close-icon">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12.499 3.50216C12.7226 3.72574 12.7226 4.08825 12.499 4.31184L8.81035 8.00029L12.4972 11.6872C12.7208 11.9107 12.7208 12.2733 12.4972 12.4968C12.2736 12.7204 11.9111 12.7204 11.6875 12.4968L8.00066 8.80998L4.31221 12.4986C4.10582 12.705 3.78106 12.7209 3.55646 12.5463L3.50252 12.4986C3.27893 12.2751 3.27893 11.9126 3.50252 11.689L7.19098 8.00029L3.50107 4.31038C3.27748 4.0868 3.27748 3.72429 3.50107 3.5007C3.72465 3.27711 4.08716 3.27711 4.31075 3.5007L8.00066 7.19061L11.6893 3.50216C11.8957 3.29577 12.2205 3.27989 12.4451 3.45453L12.499 3.50216Z" fill="white" fill-opacity="0.84"></path>
      </svg>
    </div>


  </div>
    </body></html>